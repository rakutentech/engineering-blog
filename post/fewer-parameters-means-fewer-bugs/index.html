<html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=icon href=/images/favicon.svg><link rel=stylesheet href=/scss/main.min.b3ed7c7076a200b40314c0134930ccd8fa88a21a0b3fcdcf5c1bd1ae2ff9de60.css><link rel=stylesheet href=/css/prism.css><link href="https://fonts.googleapis.com/css?family=Merriweather&display=swap" rel=stylesheet><title>Fewer parameters means fewer bugs | Rakuten Engineering Blog</title><meta name=description content="When I review code, I sometimes notice that there is an opportunity to squash method parameters &mdash; yet many developers are unaware of this when they write code. From my coding experience, we can write code more efficiently and reduce the amount of bugs by making an effort to reduce the number of parameters in our methods. Unless your manager still evaluates output by lines of code, you should definitely try these tips in your daily coding life."><meta property="og:title" content="Fewer parameters means fewer bugs | Rakuten Engineering Blog"><meta property="og:site_name" content="Rakuten Engineering Blog"><meta property="og:description" content="When I review code, I sometimes notice that there is an opportunity to squash method parameters &mdash; yet many developers are unaware of this when they write code. From my coding experience, we can write code more efficiently and reduce the amount of bugs by making an effort to reduce the number of parameters in our methods. Unless your manager still evaluates output by lines of code, you should definitely try these tips in your daily coding life."><meta property="og:url" content="https://engineering.rakuten.today/post/fewer-parameters-means-fewer-bugs/"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://engineering.rakuten.today/images/hero-5.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Fewer parameters means fewer bugs | Rakuten Engineering Blog"><link rel=canonical href=https://engineering.rakuten.today/post/fewer-parameters-means-fewer-bugs/><meta name=twitter:description content="When I review code, I sometimes notice that there is an opportunity to squash method parameters &mdash; yet many developers are unaware of this when they write code. From my coding experience, we can write code more efficiently and reduce the amount of bugs by making an effort to reduce the number of parameters in our methods. Unless your manager still evaluates output by lines of code, you should definitely try these tips in your daily coding life."><meta name=twitter:image content="https://engineering.rakuten.today/images/hero-5.jpg"><meta property="article:published_time" content="2021-10-20T00:00:00+00:00"><meta property="article:updated_time" content="2021-10-20T00:00:00+00:00"><script type=application/javascript>var dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,GA_SESSION_STORAGE_KEY,doNotTrack=dnt=="1"||dnt=="yes";doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,window.sessionStorage&&(GA_SESSION_STORAGE_KEY="ga:clientId",ga("create","G-Z6FNGN7J13",{storage:"none",clientId:sessionStorage.getItem(GA_SESSION_STORAGE_KEY)}),ga(function(e){sessionStorage.setItem(GA_SESSION_STORAGE_KEY,e.get("clientId"))})),ga("set","anonymizeIp",!0),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=line-numbers><script src=/js/initColors.js></script><div class=layout-styled><section class=section><div class=nav-container><a class=logo-link href=/><div id=logo-desktop><svg height="32" viewBox="0 0 333.4 41.1" xmlns="http://www.w3.org/2000/svg"><path class="change-fill" d="M111.3 34.5H27.6l6.7 6.6zM35.4 7.5v1c-1.6-1-2.9-1.6-4.9-1.6-5.9.0-10.3 5.3-10.3 11.9.0 6.6 4.5 11.9 10.3 11.9 1.9.0 3.3-.6 4.9-1.6v1h5.2V7.5h-5.2zm-4.9 17.8c-2.9.0-5-2.8-5-6.4.0-3.6 2.1-6.4 5-6.4s4.9 2.8 4.9 6.4c.1 3.6-2 6.4-4.9 6.4zM76.6 7.5v13.3c0 2.5-1.7 4.6-4.2 4.6s-4.2-2.1-4.2-4.6V7.5h-5.1v13.3c0 5.5 3.7 9.9 9.2 9.9 2.5.0 4.4-1.4 4.4-1.4v.8h5.2V7.5h-5.3zm48 22.7V16.9c0-2.5 1.7-4.6 4.2-4.6s4.2 2.1 4.2 4.6v13.3h5.1V16.9c0-5.5-3.7-9.9-9.2-9.9-2.5.0-4.4 1.4-4.4 1.4v-.9h-5.1v22.7h5.2z"/><path class="change-fill" d="M5.4 30.2v-8.8h3.8l6.6 8.8h6.7l-8-10.6c2.5-1.8 4.1-4.7 4.1-8 0-5.4-4.4-9.8-9.8-9.8H0v28.3h5.4zm0-22.9h3.5c2.4.0 4.4 2 4.4 4.4s-2 4.4-4.4 4.4H5.4V7.3zM95.7 24.9c-.5.3-1 .6-1.7.6-.8.0-2.4-.6-2.4-2.8V13H96V7.5h-4.4V1.9h-5.1v5.7h-2.7V13h2.7v9.8c0 5.1 3.8 8.1 7.7 8.1 1.4.0 3.4-.5 5-1.4l-3.5-4.6zM53.3 18.2l8.9-10.7H55l-6.2 7.9V0h-5.3v30.2h5.3v-9.3l7.6 9.3h7.2z"/><path class="change-fill" d="M107.6 7c-6 0-10.2 5.2-10.2 11.9.0 7 5.4 11.9 10.7 11.9 2.7.0 6.2-.9 9.1-5.1l-4.5-2.6c-3.5 5.2-9.4 2.6-10.1-2.6h14.8c1.3-8.2-4-13.5-9.8-13.5zm4.5 8.9h-9.3c1.1-5.3 8.3-5.6 9.3.0z"/><path class="change-fill" d="M155.5 3.3c7 0 12.1 5.6 12.1 13.4.0 8-5 13.5-12.1 13.5h-8.8V3.3h8.8zm-3.6 22.1h3.7c4 0 6.7-3.5 6.7-8.7.0-5.1-2.7-8.7-6.7-8.7h-3.7v17.4zM188.6 25.9c-2.4 3.3-5.2 4.8-8.8 4.8-6.2.0-10.6-4.7-10.6-11.3.0-6.4 4.3-11.4 10-11.4 5.5.0 10 5 10 11.3.0.5.0 1-.1 1.6H175c.3 3 2.3 4.9 5.1 4.9 1.5.0 2.9-.9 4.2-2.5l4.3 2.6zm-5.3-9.3c-.5-2.6-1.9-3.9-4.1-3.9-2.1.0-3.7 1.4-4.2 3.9h8.3zm18.2 13.6h-5.7l-7.2-21.6h5.9l4.2 14.4 4.2-14.4h5.9l-7.3 21.6zm26.1-4.3c-2.4 3.3-5.2 4.8-8.8 4.8-6.2.0-10.6-4.7-10.6-11.3.0-6.4 4.3-11.4 10-11.4 5.5.0 10 5 10 11.3.0.5.0 1-.1 1.6H214c.3 3 2.3 4.9 5.1 4.9 1.5.0 2.9-.9 4.2-2.5l4.3 2.6zm-5.3-9.3c-.5-2.6-2-3.9-4.1-3.9s-3.7 1.4-4.2 3.9h8.3zM230.2 30.2V1.5h5.5v28.7h-5.5zm28-10.8c0 6.6-4.2 11.3-10.1 11.3S238 25.9 238 19.4s4.2-11.3 10.1-11.3 10.1 4.8 10.1 11.3zm-15.1.1c0 3.5 2.1 6.2 5 6.2s5-2.6 5-6.2-2.1-6.2-5-6.2c-2.9-.1-5 2.6-5 6.2zm22.4-8.9c1.3-1.6 2.9-2.5 5-2.5 5.5.0 10.1 5.1 10.1 11.3.0 6.3-4.4 11.3-9.9 11.3-2 0-3.7-.8-5.2-2.2v7.1h-5.1v-27h4.4l.7 2zm0 8.8c0 3.8 2.1 6.5 5 6.5 2.8.0 5-2.9 5-6.5.0-3.7-2.2-6.5-5-6.5-2.9.0-5 2.8-5 6.5zm36 6.5c-2.4 3.3-5.2 4.8-8.8 4.8-6.2.0-10.6-4.7-10.6-11.3.0-6.4 4.3-11.4 10-11.4 5.5.0 10 5 10 11.3.0.5.0 1-.1 1.6h-14.1c.3 3 2.3 4.9 5.1 4.9 1.5.0 2.9-.9 4.2-2.5l4.3 2.6zm-5.2-9.3c-.5-2.6-2-3.9-4.1-3.9s-3.7 1.4-4.2 3.9h8.3zm12.4-6c1.4-1.6 3.6-2.5 6.3-2.5v4.8c-2.4.2-3.8.9-4.8 2.4-.6.9-.9 2-.9 3.1v11.8h-5.1V8.7h4.1l.4 1.9zm20.5 4.5c-1.5-1.5-2.8-2.2-4.3-2.2-1.4.0-2.4.7-2.4 1.8.0 1 .6 1.6 2.2 2 2.6.7 4.1 1.3 5.3 1.9 2.3 1.3 3.4 3.1 3.4 5.4.0 4-3.4 6.7-8.5 6.7-3.9.0-6.7-1.4-8.8-4.3l3.5-3.3c1.3 1.8 3.2 2.8 5.4 2.8 1.9.0 2.9-.7 2.9-1.9.0-1.1-.8-1.7-4-2.8-2.8-1-3.6-1.3-4.6-2-1.6-1.1-2.3-2.6-2.3-4.6.0-3.8 3.4-6.6 7.9-6.6 2.9.0 5.3 1 7.7 3.1l-3.4 4z"/></svg></div><div id=logo-mobile class=hidden><svg height="52" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 187 76"><path d="M111.3 34.5H27.6l6.7 6.6 77-6.6zm-75.9-27v1a8.4 8.4.0 00-4.9-1.6c-5.9.0-10.3 5.3-10.3 11.9.0 6.6 4.5 11.9 10.3 11.9 1.9.0 3.3-.6 4.9-1.6v1h5.2V7.5h-5.2zm-4.9 17.8c-2.9.0-5-2.8-5-6.4.0-3.6 2.1-6.4 5-6.4s4.9 2.8 4.9 6.4c.1 3.6-2 6.4-4.9 6.4zM76.6 7.5v13.3c0 2.5-1.7 4.6-4.2 4.6s-4.2-2.1-4.2-4.6V7.5h-5.1v13.3c0 5.5 3.7 9.9 9.2 9.9 2.5.0 4.4-1.4 4.4-1.4v.8h5.2V7.5h-5.3zm48 22.7V16.9c0-2.5 1.7-4.6 4.2-4.6s4.2 2.1 4.2 4.6v13.3h5.1V16.9c0-5.5-3.7-9.9-9.2-9.9-2.5.0-4.4 1.4-4.4 1.4v-.9h-5.1v22.7h5.2z" class="change-fill"/><path d="M5.4 30.2v-8.8h3.8l6.6 8.8h6.7l-8-10.6A9.8 9.8.0 008.8 1.8H0v28.3h5.4v.1zm0-22.9h3.5c2.4.0 4.4 2 4.4 4.4s-2 4.4-4.4 4.4H5.4V7.3zm90.3 17.6c-.5.3-1 .6-1.7.6-.8.0-2.4-.6-2.4-2.8V13H96V7.5h-4.4V1.9h-5.1v5.7h-2.7V13h2.7v9.8c0 5.1 3.8 8.1 7.7 8.1 1.4.0 3.4-.5 5-1.4l-3.5-4.6zm-42.4-6.7 8.9-10.7H55l-6.2 7.9V0h-5.3v30.2h5.3v-9.3l7.6 9.3h7.2l-10.3-12z" class="change-fill"/><path d="M107.6 7c-6 0-10.2 5.2-10.2 11.9.0 7 5.4 11.9 10.7 11.9 2.7.0 6.2-.9 9.1-5.1l-4.5-2.6c-3.5 5.2-9.4 2.6-10.1-2.6h14.8c1.3-8.2-4-13.5-9.8-13.5zm4.5 8.9h-9.3c1.1-5.3 8.3-5.6 9.3.0zM8.8 43.5c7 0 12 5.6 12 13.4.0 8-5 13.5-12 13.5H0v-27h8.8zm-3.6 22h3.7c4 0 6.7-3.4 6.7-8.6.0-5.1-2.7-8.7-6.7-8.7H5.2v17.4zm36.7.6c-2.4 3.3-5.2 4.8-8.8 4.8-6.2.0-10.6-4.7-10.6-11.3.0-6.4 4.3-11.4 10-11.4 5.5.0 10 5 10 11.3l-.1 1.6H28.3c.3 3 2.3 4.9 5 4.9 1.6.0 3-1 4.3-2.5l4.3 2.6zm-5.3-9.3c-.5-2.6-2-4-4.1-4s-3.7 1.5-4.2 4h8.3zm18.2 13.6H49l-7.2-21.6h5.9L52 63.2l4.2-14.4H62l-7.3 21.6zm26-4.3c-2.3 3.3-5.1 4.8-8.7 4.8-6.2.0-10.6-4.7-10.6-11.3.0-6.4 4.3-11.4 10-11.4 5.5.0 10 5 10 11.3l-.1 1.6H67.3c.3 3 2.3 4.9 5 4.9 1.6.0 3-1 4.3-2.5l4.3 2.6zm-5.2-9.3c-.5-2.6-2-4-4.1-4s-3.7 1.5-4.2 4h8.3zm7.9 13.6V41.7H89v28.7h-5.5zm28-10.8c0 6.6-4.2 11.3-10.1 11.3-6 0-10.1-4.8-10.1-11.3s4.2-11.3 10-11.3c6 0 10.2 4.8 10.2 11.3zm-15.1.0c0 3.6 2 6.3 5 6.3s5-2.6 5-6.2-2.1-6.2-5-6.2c-3-.1-5 2.6-5 6.2zm22.4-8.8a6.2 6.2.0 015-2.5c5.5.0 10 5 10 11.3s-4.3 11.3-9.8 11.3c-2 0-3.7-.8-5.2-2.2v7h-5.1v-27h4.4l.7 2zm0 8.8c0 3.8 2 6.5 5 6.5 2.8.0 5-3 5-6.5.0-3.7-2.2-6.5-5-6.5-3 0-5 2.8-5 6.5zm36 6.5c-2.4 3.3-5.2 4.8-8.8 4.8-6.2.0-10.6-4.7-10.6-11.3.0-6.4 4.3-11.4 10-11.4 5.5.0 10 5 10 11.3l-.1 1.6h-14.1c.3 3 2.3 4.9 5 4.9 1.6.0 3-1 4.3-2.5l4.3 2.6zm-5.2-9.3c-.5-2.6-2-4-4.1-4s-3.7 1.5-4.2 4h8.3zm12.4-6a8.1 8.1.0 016.3-2.5V53c-2.4.2-3.8.9-4.8 2.4-.6.9-1 2-1 3v11.9h-5V48.9h4l.5 1.9zm20.5 4.5c-1.5-1.5-2.8-2.2-4.3-2.2-1.4.0-2.4.7-2.4 1.8.0 1 .6 1.6 2.2 2 2.6.7 4 1.3 5.3 1.9 2.3 1.3 3.4 3 3.4 5.4.0 4-3.4 6.7-8.5 6.7a10 10 0 01-8.8-4.3l3.5-3.3a6.5 6.5.0 005.4 2.8c1.9.0 2.9-.7 2.9-2 0-1-.8-1.6-4-2.7-2.8-1-3.6-1.3-4.6-2a5.2 5.2.0 01-2.3-4.6c0-3.8 3.4-6.6 7.9-6.6 2.9.0 5.3 1 7.7 3l-3.4 4z" class="change-fill"/></svg></div><span class=header-hidden>Navigate back to the homepage</span></a><div class=nav-controls><button id=copyButton class=icon-wrapper><svg class="icon-image" width="24" height="20" viewBox="0 0 24 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M2 5C2 3.34328 3.34328 2 5 2h9c1.6567.0 3 1.34328 3 3V9c0 1.6567-1.3433 3-3 3H10C9.44771 12 9 12.4477 9 13S9.44771 14 10 14h4c2.7613.0 5-2.2387 5-5V5c0-2.76128-2.2387-5-5-5H5C2.23872.0.0 2.23872.0 5V9c0 1.4938.656313 2.8361 1.6935 3.7509C2.10768 13.1163 2.73961 13.0767 3.10494 12.6625 3.47028 12.2483 3.43068 11.6164 3.0165 11.2511 2.39169 10.6999 2 9.89621 2 9V5zm5 6c0-1.65672 1.34328-3 3-3h4C14.5523 8 15 7.55228 15 7S14.5523 6 14 6H10C7.23872 6 5 8.23872 5 11v4c0 2.7613 2.23872 5 5 5h9c2.7613.0 5-2.2387 5-5V11C24 9.50621 23.3437 8.16393 22.3065 7.24906 21.8923 6.88372 21.2604 6.92332 20.8951 7.3375 20.5297 7.75168 20.5693 8.38361 20.9835 8.74894 21.6083 9.30007 22 10.1038 22 11v4c0 1.6567-1.3433 3-3 3H10c-1.65672.0-3-1.3433-3-3V11z" fill="#000"/></svg><div id=toolTip class=tool-tip>copied</div><input id=copyText style=opacity:0 type=text class=tool-tip></button>
<button id=themeColorButton class=icon-wrapper><div id=sunRays class=sun-rays></div><div id=moonOrSun class=moon-or-sun></div><div id=moonMask class=moon-mask></div></button></div></div></section><script src=/js/toggleLogos.js></script>
<script src=/js/toggleColors.js></script>
<script src=/js/copyUrl.js></script><section class="section narrow"><section id=articleHero class="section narrow"><div class=article-hero><header class=article-header><h1 class=article-hero-heading>Fewer parameters means fewer bugs</h1><div class=article-hero-subtitle><div class=article-meta><a href=/authors/bater/ class=article-author-link><div class=article-author-avatar><img src=/authors/bater/bater-avatar.jpg></div><strong>Bater Chen</strong>
<span class=hide-on-mobile>,&nbsp;</span></a>
<script src=/js/collapseAuthors.js></script>
October 20, 2021
• 11 min read</div><div id=share-buttons><div class=linkedin title="Share this on Linkedin" onclick='window.open("https://www.linkedin.com/shareArticle?mini=true&url=https://engineering.rakuten.today/post/fewer-parameters-means-fewer-bugs/&title=&summary=&source=")'><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"/></svg></div><div class=twitter title="Share this on Twitter" onclick='window.open("https://twitter.com/intent/tweet?text=https://engineering.rakuten.today/post/fewer-parameters-means-fewer-bugs/")'><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5T1369.5 1125 1185 1335.5t-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5T285 1033q33 5 61 5 43 0 85-11-112-23-185.5-111.5T172 710v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5T884 653q-8-38-8-74 0-134 94.5-228.5T1199 256q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div><div class=facebook title="Share this on Facebook" onclick='window.open("http://www.facebook.com/share.php?u=https://engineering.rakuten.today/post/fewer-parameters-means-fewer-bugs/")'><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"/></svg></div><div class=mail title="Share this through Email" onclick='window.open("mailto:?&body=https://engineering.rakuten.today/post/fewer-parameters-means-fewer-bugs/")'><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47H160q-66 0-113-47T0 1504V710q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 1e2-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38T639 1015q-91-64-262-182.5T172 690q-62-42-117-115.5T0 438q0-78 41.5-130T160 256h1472q65 0 112.5 47t47.5 113z"/></svg></div></div></div></header><div class=article-hero-image id=ArticleImage__Hero><img src=/images/hero-5.jpg></div></div></section><aside id=progressBar class=aside-container><div class=aside-align><div><div class=overlap-container></div></div></div><div class=progress-container tabindex={-1}><div class=track-line aria-hidden=true><div id=progressIndicator class=progress-line></div></div></div></aside><article id=articleContent class=post-content style=position:relative><p>When I review code, I sometimes notice that there is an opportunity to squash method parameters &mdash; yet many developers are unaware of this when they write code. From my coding experience, we can write code more efficiently and reduce the amount of bugs by making an effort to reduce the number of parameters in our methods. Unless your manager still evaluates output by lines of code, you should definitely try these tips in your daily coding life.</p><p>So today, I want to show how to do it with OOP (object-oriented programming) design, and explain where this magic power comes from.</p><p>Let&rsquo;s start with a small example. The following demo code was written in Ruby, but don&rsquo;t worry: Ruby code is so beginner-friendly that once you have some OOP background, it&rsquo;s easy to grasp.</p><p>In this example, we have some books and want to pass the author name as a parameter, and get the book title, author name, and year published as a summary.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ruby data-lang=ruby><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Book</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>attr_reader</span> <span style=color:#e6db74>:title</span>, <span style=color:#e6db74>:year_published</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>initialize</span>(title, year_published)
</span></span><span style=display:flex><span>    @title <span style=color:#f92672>=</span> title
</span></span><span style=display:flex><span>    @year_published <span style=color:#f92672>=</span> year_published
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>summary</span>(first_name, last_name)
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>#{</span>last_name<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>#{</span>first_name<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>#{</span>year_published<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>book <span style=color:#f92672>=</span> <span style=color:#66d9ef>Book</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>&#34;Ruby is the best&#34;</span>, <span style=color:#e6db74>&#34;2020&#34;</span>)
</span></span><span style=display:flex><span>book<span style=color:#f92672>.</span>summary(<span style=color:#e6db74>&#34;Bater&#34;</span>, <span style=color:#e6db74>&#34;Chen&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Ruby is the best - Chen, Bater (2020)&#34;</span>
</span></span></code></pre></div><p>We have a book class. It has two attributes: <code>title</code>, and <code>year_published</code>. The <code>initialize</code> method is called when we <code>new</code> a book object. Book class only has one instance method called <code>summary</code>. It needs two parameters: <code>first_name</code> and <code>last_name</code>. In Ruby, when we define the <code>attr_reader</code> as the attribute of the object, it will create the read method automatically. So we can call the instance variable directly by <code>title</code> to get <code>@title</code> return, same as <code>year_published</code>.</p><p>This simple method works fine but is not good enough. Let&rsquo;s refactor it.</p><h2 id=good-code-should-be-small-and-simple>Good code should be small and simple</h2><p>What is good code? This question might be hard to answer, but I would say <strong>good code should be small and simple</strong>. In this article, I&rsquo;ll focus on making the code <strong>smaller</strong>, by reducing the amount of parameters.</p><p>Generally speaking, <em><strong>one</strong> parameter is better than <strong>two</strong></em> and <em><strong>no</strong> parameter is better than <strong>one</strong>.</em> The problem with parameters is that it takes time to read and understand them, and time is always expensive.</p><blockquote><p>We spent around 70% of time reading the existing code, but only 30% is spent actually writing.</p></blockquote><p>If we can save some time from reading the code, not only from literally reading but also from understanding the spec and logic, we can write code more efficiently.</p><p>Secondly, <strong>when code is short, bugs have nowhere to hide</strong>. Parameters are bug-prone because they demand extra care and concern. Reducing parameters can not only make the method clearer, but also show our intention more explicitly. It can make maintaining the code easier. When we reduce the number of parameters, we are reducing the number of potential bugs at the same time.</p><p>Now we know the benefits of reducing the parameters, the question is: how can we do it? Let&rsquo;s check the parameters again.</p><h2 id=data-clump>Data Clump</h2><p>One observation that we can make is that parameters are <strong>a group of data that always comes together</strong>. This data would make no sense when one piece of data is missing. We call it a set of <strong>Data Clump</strong>. For example, a start date and end date pair we would call a data clump or, as in this example, a data clump would be the first name and last name.</p><p>In the &ldquo;OOP&rdquo; world, <strong>objects contain data</strong> and <strong>classes contain behavior</strong> (i.e. methods operating on data). It&rsquo;s cheap to create many small objects<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> to manage and operate on the serial data. Additionally, we can define methods on the object and reuse them when necessary.</p><p>Let&rsquo;s try to create a new object to contain first name and last name.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Author</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>attr_reader</span> <span style=color:#e6db74>:first_name</span>, <span style=color:#e6db74>:last_name</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>initialize</span>(first_name, last_name)
</span></span><span style=display:flex><span>    @first_name <span style=color:#f92672>=</span> first_name
</span></span><span style=display:flex><span>    @last_name <span style=color:#f92672>=</span> last_name
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>full_name</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>last_name<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>#{</span>first_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>The Author class also has two attributes, and the author object has one instance method call <code>full_name</code>. Now we can use the author object to replace the first name and last name.</p><h4 id=before>Before</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>summary</span>(first_name, last_name)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>#{</span>last_name<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>#{</span>first_name<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>#{</span>year_published<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>book <span style=color:#f92672>=</span> <span style=color:#66d9ef>Book</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>&#34;Ruby is the best&#34;</span>, <span style=color:#e6db74>&#34;2020&#34;</span>)
</span></span><span style=display:flex><span>book<span style=color:#f92672>.</span>summary(<span style=color:#e6db74>&#34;Bater&#34;</span>, <span style=color:#e6db74>&#34;Chen&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Ruby is the best - Chen, Bater (2020)&#34;</span>
</span></span></code></pre></div><h4 id=after>After</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>summary</span>(author)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>#{</span>author<span style=color:#f92672>.</span>full_name<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>#{</span>year_published<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>book <span style=color:#f92672>=</span> <span style=color:#66d9ef>Book</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>&#34;Ruby is the best&#34;</span>, <span style=color:#e6db74>&#34;2020&#34;</span>)
</span></span><span style=display:flex><span>book<span style=color:#f92672>.</span>summary(<span style=color:#66d9ef>Author</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>&#34;Bater&#34;</span>, <span style=color:#e6db74>&#34;Chen&#34;</span>))
</span></span><span style=display:flex><span><span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Ruby is the best - Chen, Bater (2020)&#34;</span>
</span></span></code></pre></div><p>The output of <code>summary</code> is the same, but the parameter reduces from two strings to one object. Well, you may doubt that it doesn&rsquo;t really matter, but imagine that you can follow the same pattern to reduce the parameter from 10 data into 1 object. That would be a huge impact.</p><h2 id=encapsulation>Encapsulation</h2><p>You may also have noticed that I relocated the logic of <code>full_name</code> from the <code>Book</code> class to the <code>Author</code>. This is because the behavior in <code>full_name</code> is independent of any book object.</p><p>In this case, the <code>Book</code> class shouldn&rsquo;t know the logic of <code>full_name</code>. The business logic of <code>full_name</code> should only be defined in the <code>Author</code> class, not spread to somewhere else. From now on, the <code>Book</code> class has no dependence on <code>first_name</code> and <code>last_name</code> directly. In fact, any object can be the parameter of the summary method as long as it has a <code>full_name</code> method. For example, if we have a user object that also can return <code>full_name</code>, it also works fine with the <code>summary</code> method.</p><p>This practice is also known as <a href=https://en.wikipedia.org/wiki/Duck_typing target=_blank rel="external noopener noreferrer nofollow">Duck Typing</a>. If it walks like a duck and it quacks like a duck, then it must be a duck. In duck typing, an object&rsquo;s suitability is determined by the presence of certain methods and properties, rather than the type of the object itself. In the Java case, you can use the interface.</p><p>Now a new requirement is coming, we need to add a new method called <code>cover</code>, and it also has author first name and last name inside. We can follow the pattern we just made. Let&rsquo;s compare before and after the refactoring of the book class.</p><h4 id=old-pattern-without-refactoring>Old pattern without refactoring</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>summary</span>(first_name, last_name)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>#{</span>last_name<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>#{</span>first_name<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>#{</span>year_published<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>cover</span>(first_name, last_name)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#ae81ff>\n\n\n</span><span style=color:#e6db74>#{</span>last_name<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>#{</span>first_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><h4 id=after-refactor>After refactor</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>summary</span>(author)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>#{</span>author<span style=color:#f92672>.</span>full_name<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>#{</span>year_published<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>cover</span>(author)
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#ae81ff>\n\n\n</span><span style=color:#e6db74>#{</span>author<span style=color:#f92672>.</span>full_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>The cover method generates a string that has the book title and author&rsquo;s full name inside. After the refactoring, we can reuse the author&rsquo;s full name method again. Once we build up a good pattern, the new code can follow it easier and keep our project clean. But if you didn&rsquo;t pay attention, the code would quickly become harder to read, develop technical debt and become a developer&rsquo;s worst nightmare.</p><p>You may also notice that both <code>summary</code> and <code>cover</code> need the same parameter, author, it&rsquo;s the smell of refactoring. The author information should be one of the attributes of the book object, instead of passing as a parameter when we call the book method. So we can refactor the book class again.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Book</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>attr_reader</span> <span style=color:#e6db74>:title</span>, <span style=color:#e6db74>:year_published</span>, <span style=color:#e6db74>:author</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>initialize</span>(title, year_published, author)
</span></span><span style=display:flex><span>    @title <span style=color:#f92672>=</span> title
</span></span><span style=display:flex><span>    @year_published <span style=color:#f92672>=</span> year_published
</span></span><span style=display:flex><span>    @author <span style=color:#f92672>=</span> author
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>summary</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>#{</span>author<span style=color:#f92672>.</span>full_name<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>#{</span>year_published<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>cover</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#ae81ff>\n\n\n</span><span style=color:#e6db74>#{</span>author<span style=color:#f92672>.</span>full_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>bater <span style=color:#f92672>=</span> <span style=color:#66d9ef>Author</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>&#34;Bater&#34;</span>, <span style=color:#e6db74>&#34;Chen&#34;</span>)
</span></span><span style=display:flex><span>book <span style=color:#f92672>=</span> <span style=color:#66d9ef>Book</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>&#34;Ruby is the best&#34;</span>, <span style=color:#e6db74>&#34;2020&#34;</span>, bater)
</span></span><span style=display:flex><span>book<span style=color:#f92672>.</span>summary
</span></span><span style=display:flex><span><span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Ruby is the best - Chen, Bater (2020)&#34;</span>
</span></span><span style=display:flex><span>book<span style=color:#f92672>.</span>cover
</span></span><span style=display:flex><span><span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Ruby is the best</span><span style=color:#ae81ff>\n\n\n</span><span style=color:#e6db74>Chen, Bater&#34;</span>
</span></span></code></pre></div><p>Both <code>summary</code> and <code>cover</code> methods&rsquo; output remain the same but now we can call it freely without any parameter once the book object is prepared. (In Ruby, we can skip parentheses when there is no parameter.)</p><p>This example doesn&rsquo;t encourage you to move all the parameters into the object attributes, it depends on the domain know-how. We can do it because it makes sense for a book object to having an author as an attribute in this case. It may get worse if we try to put the wrong data as the object attribute.</p><h2 id=open-closed-principle>Open-closed principle</h2><p>When we reducing our parameters from two to zero, our design is now open for extension but closed for modification. This is in line with the <a href=https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle target=_blank rel="external noopener noreferrer nofollow">open-closed principle</a>.</p><p>Let&rsquo;s say we have a new requirement again, this time, some authors now have a middle name. In this new version, it would be very easy to adapt our code because we don&rsquo;t need to touch the book class anymore. The new author class would refactored like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Author</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>attr_reader</span> <span style=color:#e6db74>:first_name</span>, <span style=color:#e6db74>:last_name</span>, <span style=color:#e6db74>:middle_name</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>initialize</span>(first_name, last_name, middle_name <span style=color:#f92672>=</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>    @first_name <span style=color:#f92672>=</span> first_name
</span></span><span style=display:flex><span>    @last_name <span style=color:#f92672>=</span> last_name
</span></span><span style=display:flex><span>    @middle_name <span style=color:#f92672>=</span> middle_name
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>full_name</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> middle_name<span style=color:#f92672>.</span>nil?
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>last_name<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>#{</span>first_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>      <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>last_name<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>#{</span>middle_name<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>#{</span>first_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>bater <span style=color:#f92672>=</span> <span style=color:#66d9ef>Author</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>&#34;Bater&#34;</span>, <span style=color:#e6db74>&#34;Chen&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>Book</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>&#34;Ruby is the best&#34;</span>, <span style=color:#e6db74>&#34;2020&#34;</span>, bater)<span style=color:#f92672>.</span>summary
</span></span><span style=display:flex><span><span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Ruby is the best - Chen, Bater (2020)&#34;</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>robert <span style=color:#f92672>=</span> <span style=color:#66d9ef>Author</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>&#34;Robert&#34;</span>, <span style=color:#e6db74>&#34;Kiyosaki&#34;</span>, <span style=color:#e6db74>&#34;T&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>Book</span><span style=color:#f92672>.</span>new(<span style=color:#e6db74>&#34;Rich Dad, Poor Dad&#34;</span>, <span style=color:#e6db74>&#34;1997&#34;</span>, robert)<span style=color:#f92672>.</span>summary
</span></span><span style=display:flex><span><span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#34;Rich Dad, Poor Dad - Kiyosaki, T, Robert (1997)&#34;</span>
</span></span></code></pre></div><p>In this design, the existing behavior doesn&rsquo;t change. The default value of the middle name is <code>nil</code> (also known as Null in other languages) because in most cases we can skip it and we won&rsquo;t break anything when the existing code tries to create a new author with only two parameters. The author class is open for extension and the book class is closed for modification in this case. Without refactoring, we need to touch upon both the <code>summary</code> and <code>cover</code> methods, causing the parameters to increase from two to three. Let&rsquo;s compare the code before and after, again:</p><h4 id=old-pattern-without-refactoring-1>Old pattern without refactoring</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>summary</span>(first_name, last_name, middle_name <span style=color:#f92672>=</span> <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> middle_name<span style=color:#f92672>.</span>nil?
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>#{</span>last_name<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>#{</span>first_name<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>#{</span>year_published<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>#{</span>last_name<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>#{</span>middle_name<span style=color:#e6db74>}</span><span style=color:#e6db74>, </span><span style=color:#e6db74>#{</span>first_name<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>#{</span>year_published<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><h4 id=after-refactoring>After refactoring</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>summary</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>#{</span>author<span style=color:#f92672>.</span>full_name<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>#{</span>year_published<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>Obviously, the code quality has a huge improvement after refactoring.</p><h2 id=loose-coupling>Loose coupling</h2><p>Before we finish refactoring and send off this PR to someone, let&rsquo;s check the code again. Is it clean enough?</p><p>The code seems short and simple, but this method still depends on the author class. In other words, the <code>summary</code> method needs to know the author object has a <code>full_name</code> method, we could say the book class still couple with author class. In this case, maybe it&rsquo;s hard to notice the cost of coupling, let&rsquo;s imagine a few years later, the <code>summary</code> method might become more complicated:</p><h4 id=few-years-later>Few years later</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>summary</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># 10 lines of code you don&#39;t want to read.</span>
</span></span><span style=display:flex><span>  middle_result <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>some_author_title_helper(author)<span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>#{</span>author<span style=color:#f92672>.</span>full_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e># another 10 lines of code</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> final_result
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>The disadvantage of coupling is that when one class needs to change, you need to change others as well. For example, one day we need to rename the full name method or add more parameters to it, we need to modify the book class at the same time, which we don&rsquo;t like.</p><p>The bad news is that in the real world it&rsquo;s almost impossible to remove all the coupling between objects. But we can at least reduce the impact by segregating and highlighting the dependence.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rb data-lang=rb><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>summary</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>#{</span>title<span style=color:#e6db74>}</span><span style=color:#e6db74> - </span><span style=color:#e6db74>#{</span>author_name<span style=color:#e6db74>}</span><span style=color:#e6db74> (</span><span style=color:#e6db74>#{</span>year_published<span style=color:#e6db74>}</span><span style=color:#e6db74>)&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>author_name</span>
</span></span><span style=display:flex><span>  author<span style=color:#f92672>.</span>full_name
</span></span><span style=display:flex><span><span style=color:#66d9ef>end</span>
</span></span></code></pre></div><p>After this refactoring, the <code>summary</code> method only calls from other methods from the book object itself. The <code>Book</code> class still has the coupling with the <code>Author</code> class, but the point of coupling is obvious and easy to maintain. If we only consider the example case, you might wonder: &ldquo;Isn&rsquo;t that a little bit over-designed?&rdquo; Well, all design is trade-offs. We gain the benefit of obvious, explicit point of coupling, but we have to accept the drawback of another layer of indirection. In our small example that may be a bad trade-off. But in large, production-grade codebases the benefits outweigh the drawbacks dramatically. So, I would say that it&rsquo;s better to apply a pattern early on. Now we can push the PR confidently and enjoy the holiday.</p><h2 id=conclusion>Conclusion</h2><p>Good code should be small and simple. Of course, parameters are not the only place we can put our effort into when we&rsquo;re looking to reduce code size.</p><p>During refactoring, don&rsquo;t forget to confirm the result by unit testing to make sure the final behavior is consistent. People around you may think that you&rsquo;re wasting your time because the final behavior remains the same even though you spent a lot of time on it. But there is value in code quality<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>. I believe this line of thinking would help you perform well in development speed and product stability in the long term.</p><p>I hope this small example can convince you this refactoring skill can benefit your coding life. If not, please wait for my next blog post and give me another chance. See you next time.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Many small objects could end up causing GC pressure. But high performance languages often have tricks up their sleeve like doing <a href=https://shipilev.net/jvm/anatomy-quarks/18-scalar-replacement/ target=_blank rel="external noopener noreferrer nofollow">escape analysis</a> to convert heap allocation to stack allocations or <a href=https://shipilev.net/jvm/anatomy-quarks/18-scalar-replacement/ target=_blank rel="external noopener noreferrer nofollow">expanding argument objects as primitive arguments</a>. These languages also generally have separate GC pathways for small objects and short-lived objects. In most cases, if you&rsquo;re just using an argument object locally in a high performance language, your runtime will manage to optimize most of the cost away.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>For example, the <a href=https://www.martinfowler.com/bliki/DesignStaminaHypothesis.html target=_blank rel="external noopener noreferrer nofollow">Design-Stamina Hypothesis</a> which postulates that good design outperform bad/no design over time, in terms of functional delivery.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></article><section id=articleNext class="section nartrow"><h3 class=footer-next-heading>More articles from Rakuten Engineering Blog</h3><div class=footer-spacer></div><div class=next-articles-grid numberofarticles={numberOfArticles}><div class=post-row><a href=/post/elm-at-rakuten/ class=article-link id=article-link-bigger><div><div class=image-container><img src=/post/elm-at-rakuten/images/elm-at-rakuten.png class=article-image></div><div><h2 class=article-title>Elm at Rakuten</h2><p class=article-excerpt>Our story of adopting the Elm language in Rakuten. The lessons we learned, and our likes and dislikes.</p><div class=article-metadata>August 1, 2021 · 41 min read</div></div></div></a><a href=/post/graceful-k8s-delpoyments/ class=article-link><div><div class=image-container><img src=/images/rolling-waves.jpg class=article-image></div><div><h2 class=article-title>Zero-Downtime Rolling Deployments in Kubernetes</h2><p class=article-excerpt>Kubernetes enables us to operate robust systems at scale. However, it is not perfect and in edge cases Kubernetes may behave in unexpected ways.</p><div class=article-metadata>July 18, 2021 · 11 min read</div></div></div></a></div></div></section></section><script src=/js/progressBar.js></script><div class=footer-gradient></div><div class="section narrow"><div class=footer-hr></div><div class=footer-container><div class=footer-text>&copy; 2022 Rakuten Group, Inc.<br><br><div class=license-icons><a rel=license href=https://creativecommons.org/licenses/by/4.0/ title="Creative Commons Attribution 4.0 International license"><i class=cc-icon-cc></i>
<i class=cc-icon-cc-by></i></a></div>Except where otherwise noted, content on this site is licensed under a <a rel="external noopener" href=https://creativecommons.org/licenses/by/4.0/>Creative Commons Attribution 4.0 International license</a>.</div><div class=footer-text><a href=https://github.com/rakutentech><svg class="social-icon-image" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillrule="evenodd" cliprule="evenodd" d="M7 0C3.1325.0.0 3.21173.0 7.17706.0 10.3529 2.00375 13.0353 4.78625 13.9863 5.13625 14.0491 5.2675 13.8338 5.2675 13.6454 5.2675 13.4749 5.25875 12.9097 5.25875 12.3087 3.5 12.6406 3.045 11.8691 2.905 11.4653 2.82625 11.259 2.485 10.622 2.1875 10.4516 1.9425 10.317 1.5925 9.98508 2.17875 9.97611 2.73 9.96714 3.12375 10.4964 3.255 10.7118c.63 1.0855 1.63625.7805 2.03875.5921C5.355 10.8374 5.53875 10.5234 5.74 10.3439 4.1825 10.1645 2.555 9.54549 2.555 6.80026c0-.7805.27125-1.42644.7175-1.92883C3.2025 4.692 2.9575 3.95635 3.3425 2.96951c0 0 .58625-.1884 1.925.73565.56-.16149 1.155-.24223 1.75-.24223s1.19.08074 1.75.24223c1.3388-.93302 1.925-.73565 1.925-.73565C11.0775 3.95635 10.8325 4.692 10.7625 4.87143 11.2087 5.37382 11.48 6.01079 11.48 6.80026c0 2.7542-1.63625 3.36424-3.19375 3.54364C8.54 10.5682 8.75875 10.9988 8.75875 11.6717 8.75875 12.6316 8.75 13.4032 8.75 13.6454 8.75 13.8338 8.88125 14.0581 9.23125 13.9863 11.9963 13.0353 14 10.3439 14 7.17706 14 3.21173 10.8675.0 7 0z" fill="#73737d"/></svg></a><a href=https://github.com/rakutentech>Rakuten Tech Github</a></div></div></div><script src=/js/extra.js></script></div><script src=/js/prism.js></script></body></html>